[SERVICE]
    Flush        1
    Daemon       off
    Log_Level    info
    Parsers_File parsers.conf

# Input: Syslog (e.g., Synology, network switches)
[INPUT]
    Name   syslog
    Mode   udp
    Listen 0.0.0.0
    Port   514
    Parser syslog-rfc5424
    Tag    syslog

# Input: Docker container logs
[INPUT]
    Name   tail
    Path   /var/lib/docker/containers/*/*.log
    Parser docker
    Tag    docker.*
    

# Input: Web app log files
# [INPUT]
#     Name   tail
#     Path   /path/to/webapp/logs/*.log
#     Parser json
#     Tag    webapp.*

# Filter: Add labels for grouping
[FILTER]
    Name   modify
    Match  syslog
    Add    job synology

[FILTER]
    Name   modify
    Match  docker.*
    Add    job docker

[FILTER]
    Name   modify
    Match  webapp.*
    Add    job webapp

# Output: Send everything to Loki
[OUTPUT]
    Name        loki
    Match       *
    Host        loki
    Port        3100
    Labels      job=fluentbit